(()=>{function p(f){f.magic("sail",()=>i=>_D?.sail(i)),f.directive("sail",(i,{modifiers:h,expression:g},{effect:u,evaluateLater:A,cleanup:m})=>{let n={path:null,state:null,replace:!1,active:null},b=A(g),s=[],r={};u(()=>{b(t=>{if(s.splice(0,s.length),s.push(...h),typeof t=="string"||typeof t=="number")n.path=t.toString();else if(t)Array.isArray(t)?n.path=t.join("/"):typeof t=="object"&&(n.path=Array.isArray(t.path)?t.path.join("/"):t.path.toString(),n.state=t.state??null,n.replace=!!t.replace,t.active&&s.push(...t.active.split(" ").filter(Boolean)));else return a();if(!n.path)return a();(s.length||i.tagName==="A")&&(o(),addEventListener("underscored:sailed",o)),i.addEventListener("click",l)})}),m(()=>a());function l(t){_D&&!r.external&&(t.preventDefault(),_D.sail(n))}function o(){if(!_D)return;let t=_D.url(n.path);t?.origin===location.origin&&t?.pathname===location.pathname?s.forEach(e=>i.classList.add(e)):s.forEach(e=>i.classList.remove(e)),i.tagName==="A"&&(r.initial||(r.initial={href:i.getAttribute("href"),target:i.getAttribute("target"),rel:i.getAttribute("rel")}),r.url=t?.href??"",r.external=!r.url.startsWith(location.origin+_D.base()),i.setAttribute("href",r.url),r.external?(typeof r.initial.target!="string"&&i.setAttribute("target","_blank"),typeof r.initial.rel!="string"&&i.setAttribute("rel","noopener noreferrer")):c(["target","rel"]))}function c(t=["href","target","rel"]){r.initial&&t.forEach(e=>{typeof r.initial[e]=="string"?i.setAttribute(e,r.initial[e]):i.removeAttribute(e,r.initial[e])})}function a(){i.removeEventListener("click",l),removeEventListener("underscored:sailed",o),s.forEach(t=>i.classList.remove(t)),c()}})}document.addEventListener("alpine:init",()=>window.Alpine.plugin(p));})();
//# sourceMappingURL=alpine-sail.min.js.map
